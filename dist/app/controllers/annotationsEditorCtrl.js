/*! grafana - v1.8.0 - 2014-09-08
 * Copyright (c) 2014 Torkel Ã–degaard; Licensed Apache License */

define(["angular","lodash","jquery"],function(a,b,c){var d=a.module("grafana.controllers");d.controller("AnnotationsEditorCtrl",["$scope","datasourceSrv",function(d,e){var f={name:"",datasource:null,showLine:!0,iconColor:"#C0C6BE",lineColor:"rgba(255, 96, 96, 0.592157)",iconSize:13,enable:!0};d.init=function(){d.editor={index:0},d.datasources=e.getAnnotationSources(),d.annotations=d.dashboard.annotations.list,d.reset(),d.$watch("editor.index",function(a){2!==a&&d.reset()})},d.datasourceChanged=function(){d.currentDatasource=b.findWhere(d.datasources,{name:d.currentAnnotation.datasource}),d.currentDatasource||(d.currentDatasource=d.datasources[0])},d.edit=function(a){d.currentAnnotation=a,d.currentIsNew=!1,d.datasourceChanged(),d.editor.index=2,c(".tooltip.in").remove()},d.reset=function(){d.currentAnnotation=a.copy(f),d.currentIsNew=!0,d.datasourceChanged(),d.currentAnnotation.datasource=d.currentDatasource.name},d.update=function(){d.reset(),d.editor.index=0},d.add=function(){d.annotations.push(d.currentAnnotation),d.reset(),d.editor.index=0},d.removeAnnotation=function(a){var c=b.indexOf(d.annotations,a);d.annotations.splice(c,1)}}])});