/*! grafana - v1.8.0 - 2014-09-08
 * Copyright (c) 2014 Torkel Ã–degaard; Licensed Apache License */

define(["angular","jquery","config","lodash"],function(a,b,c,d){var e=a.module("grafana.routes");e.config(["$routeProvider",function(a){a.when("/dashboard/file/:jsonFile",{templateUrl:"app/partials/dashboard.html",controller:"DashFromFileProvider",reloadOnSearch:!1})}]),e.controller("DashFromFileProvider",["$scope","$rootScope","$http","$routeParams","alertSrv",function(b,c,e,f,g){var h=function(b,c){var e;d.templateSettings={interpolate:/\{\{(.+?)\}\}/g};var f=d.template(b),g=f({ARGS:c});try{e=a.fromJson(g)}catch(h){e=!1}return e},i=function(a){return e({url:"app/dashboards/"+a.replace(/\.(?!json)/,"/")+"?"+(new Date).getTime(),method:"GET",transformResponse:function(a){return h(a,f)}}).then(function(a){return a?a.data:!1},function(){return g.set("Error","Could not load <i>dashboards/"+a+"</i>. Please make sure it exists","error"),!1})};i(f.jsonFile).then(function(a){b.emitAppEvent("setup-dashboard",a)})}])});